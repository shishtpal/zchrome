zchrome [options] <command> [command-args>

GLOBAL OPTIONS:
  --url <ws-url>           Connect to existing Chrome (ws://...)
  --use <target-id>        Execute command on existing page
  --headless [new|old]     Enable headless mode (default: off)
  --port <port>            Debug port [default: 9222]
  --chrome <path>          Chrome binary path
  --data-dir <path>        User data directory for Chrome profile
  --timeout <ms>           Command timeout [default: 30000]
  --verbose                Print CDP messages
  --output <path>          Output file path (for screenshot/pdf)
  --full                   Capture full page screenshot (not just viewport)

COMMANDS:
  open                     Launch Chrome with remote debugging
  connect                  Connect to running Chrome, get WebSocket URL
  screenshot [url]         Capture PNG screenshot
  pdf [url]                Generate PDF
  evaluate [url] <expr>    Evaluate JS expression
  network [url]            Log network requests
  snapshot                 Capture accessibility tree of active page, save to zsnap.json
  version                  Print browser version info
  help                     Show this help message

REPL COMMANDS (interactive mode):
  interactive              REPL: enter CDP commands as JSON

NAVIGATION:
  navigate <url>           Navigate to URL, print final URL + title
  back                     Go back in history
  forward                  Go forward in history
  reload                   Reload current page

TAB MANAGEMENT:
  tab                      List open tabs (numbered)
  tab new [url]            Open new tab (optionally navigate to URL)
  tab <n>                  Switch to tab n
  tab close [n]            Close tab n (default: current)
  window new               Open new browser window
  list-targets             List all open targets
  pages                    List all open pages with target IDs

ELEMENT ACTIONS:
  click <sel>              Click element (CSS selector or @ref)
  dblclick <sel>           Double-click element
  hover <sel>              Hover over element
  focus <sel>              Focus element
  type <sel> <text>        Type text into element (appends)
  fill <sel> <text>        Clear and fill element with text
  select <sel> <value>     Select dropdown option by value
  check <sel>              Check checkbox
  uncheck <sel>            Uncheck checkbox
  scroll <dir> [px]        Scroll page (up/down/left/right) [default: 300px]
  scrollintoview <sel>     Scroll element into view (alias: scrollinto)
  drag <src> <tgt>         Drag and drop from source to target element
  upload <sel> <files>     Upload files to file input

KEYBOARD:
  press <key>              Press key (Enter, Tab, Control+a) (alias: key)
  keydown <key>            Hold key down
  keyup <key>              Release key

MOUSE:
  mouse move <x> <y>       Move mouse to coordinates
  mouse down [button]      Press mouse button (left/right/middle)
  mouse up [button]        Release mouse button
  mouse wheel <dy> [dx]    Scroll mouse wheel

CURSOR:
  cursor active            Show the currently focused element
  cursor hover             Show the element under the mouse cursor
  cursor record <file>     Record mouse/keyboard events to JSON file
  cursor replay <file>     Replay events from JSON file
  cursor optimize <file>   Optimize macro JSON (remove redundant events)

GETTERS:
  get text <sel>           Get text content
  get html <sel>           Get innerHTML
  get dom <sel>            Get outerHTML
  get value <sel>          Get input value
  get attr <sel> <attr>    Get attribute value
  get title                Get page title
  get url                  Get current URL
  get count <sel>          Count matching elements
  get box <sel>            Get bounding box (x, y, width, height)
  get styles <sel>         Get computed styles (JSON)

WAIT:
  wait <selector>          Wait for element to be visible
  wait <ms>                Wait for time (milliseconds)
  wait --text "string"     Wait for text to appear on page
  wait --match "pattern"   Wait for URL to match glob pattern
  wait --load <state>      Wait for load state (load, domcontentloaded, networkidle)
  wait --fn "expression"   Wait for JS expression to return truthy

COOKIE MANAGEMENT:
  cookies                  List all cookies
  cookies set <n> <v>      Set a cookie
  cookies clear            Clear all cookies
  storage local            Get all localStorage entries (JSON)
  storage local <key>      Get specific localStorage key
  storage local set <k> <v> Set localStorage value
  storage local clear      Clear all localStorage
  storage local export <f> Export localStorage to JSON/YAML file
  storage local import <f> Import localStorage from JSON/YAML file
  storage session          Same commands for sessionStorage

SNAPSHOT OPTIONS:
  -i, --interactive-only   Only include interactive elements
  -c, --compact            Compact output (skip empty structural elements)
  -d, --depth <n>          Limit tree depth
  -s, --selector <sel>     Scope snapshot to CSS selector

CONFIG FILE:
  zchrome.json is stored alongside the executable for portability.
  It stores chrome_path, data_dir, port, ws_url, last_target, and mouse position.
  Options from command line override config file values.

EXAMPLES:
  # Launch Chrome and connect
  zchrome open --chrome "C:\Program Files\Google\Chrome\Application\chrome.exe"
  zchrome connect

  # Subsequent commands use saved WebSocket URL
  zchrome pages
  zchrome --use <target-id> screenshot --output page.png
  zchrome evaluate "document.title"

  # Launch headless and take screenshot
  zchrome open --headless
  zchrome connect
  zchrome screenshot https://example.com --output page.png

  # Take snapshot of active page's accessibility tree
  zchrome snapshot                       # Snapshot current page
  zchrome snapshot -i                    # Interactive elements only
  zchrome snapshot -c -d 3               # Compact mode, depth 3
  zchrome snapshot -s "#main-content"    # Scope to selector

  # Interact with elements (use CSS selectors or @refs from snapshot)
  zchrome click "#login-btn"             # Click by CSS selector
  zchrome click @e3                      # Click by snapshot ref
  zchrome fill "#email" "test@example.com"
  zchrome type @e5 "password"
  zchrome select "#country" "US"
  zchrome scroll down 500
  zchrome scrollinto "#footer"
  zchrome drag @e3 @e7                    # Drag element to another
  zchrome upload "#file-input" /path/to/file.pdf  # Upload file
  zchrome upload @e5 doc1.txt doc2.txt   # Upload multiple files

  # Get element information
  zchrome get text @e3                   # Get text content by ref
  zchrome get value "#email"             # Get input value
  zchrome get attr @e5 href              # Get href attribute
  zchrome get title                      # Get page title
  zchrome get url                        # Get current URL
  zchrome get count "li.item"            # Count elements

  # Keyboard input
  zchrome press Enter                   # Press Enter key
  zchrome press Control+a               # Select all
  zchrome key Tab                       # Press Tab (alias for press)
  zchrome keydown Shift                 # Hold Shift down
  zchrome keyup Shift                   # Release Shift

  # Mouse control
  zchrome mouse move 100 200            # Move mouse to coordinates
  zchrome mouse down left               # Press left button
  zchrome mouse up                      # Release button
  zchrome mouse wheel -100              # Scroll down 100px

  # Cursor info
  zchrome cursor active                 # Show focused element
  zchrome cursor hover                  # Show element at mouse position

  # Macro recording and playback
  zchrome cursor record macro.json      # Record events (Enter to stop)
  zchrome cursor replay macro.json      # Replay recorded events

  # Wait for conditions
  zchrome wait "#login-form"            # Wait for element
  zchrome wait 2000                     # Wait 2 seconds
  zchrome wait --text "Welcome"         # Wait for text
  zchrome wait --match "**/dashboard"   # Wait for URL pattern
  zchrome wait --load networkidle       # Wait for network idle
  zchrome wait --fn "window.ready"      # Wait for JS condition
